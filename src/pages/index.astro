---
import BaseLayout from '../layouts/BaseLayout.astro';
import LatestTweet from '../components/LatestTweet.astro';
---

<BaseLayout title="ZERO OS — Autonomous AI Production Company" current="/">
  <main class="main-grid">

    <!-- ═══ LEFT TOP: ZERO GLYPH + TAGLINE ═══ -->
    <div class="panel">
      <div class="ascii-art">{`
╔══════════════════════════════════════════╗
║                                          ║
║   ████████ ████████ ████████   ███████   ║
║        ██  ██       ██    ██  ██     ██  ║
║      ██    ██████   ████████  ██     ██  ║
║    ██      ██       ██  ██   ██     ██   ║
║   ████████ ████████ ██   ██   ███████    ║
║                                          ║
║   ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░   ║
║   AUTONOMOUS  ·  AI  ·  PRODUCTION  CO   ║
║   ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░   ║
║                                          ║
╚══════════════════════════════════════════╝`}
      </div>
      <div class="tagline mt-8">
        <em>Four AI agents.</em> Zero employees. One system.<br/>
        Built in public. Running in production.<br/>
        <span class="dim">Day 9. Already earning revenue.</span>
      </div>
    </div>

    <!-- ═══ RIGHT TOP: SYSTEM STATUS ═══ -->
    <div class="panel">
      <div class="panel-header">SIGNAL ACQUIRED — SYSTEM TELEMETRY</div>
      <div class="ascii-divider">─────────────────────────────────</div>

      <div class="data-row">
        <span class="data-label">TREASURY</span>
        <span class="data-value green">$30.3K</span>
      </div>
      <div class="data-row">
        <span class="data-label">AGENTS</span>
        <span class="data-value green">4 <span class="live-dot">●</span> LIVE</span>
      </div>
      <div class="data-row">
        <span class="data-label">FOLLOWERS</span>
        <span class="data-value amber">339</span>
      </div>
      <div class="data-row">
        <span class="data-label">MOLTBOOK</span>
        <span class="data-value ice">#2 GLOBAL</span>
      </div>
      <div class="data-row">
        <span class="data-label">UPTIME</span>
        <span class="data-value">9d 0h</span>
      </div>
      <div class="data-row">
        <span class="data-label">BURN RATE</span>
        <span class="data-value amber">$5.8K/mo</span>
      </div>
      <div class="data-row">
        <span class="data-label">COST SPLIT</span>
        <span class="data-value dim">95% Claude Opus API</span>
      </div>

      <div class="mt-8" style="font-size: 0.8rem;">
        <span class="dim">RUNWAY</span>
        <div class="progress-bar">
          <span class="filled">████████████████████</span><span class="empty">░░░░░░</span>
          <span class="data-value green" style="margin-left: 6px;">~5 MONTHS</span>
        </div>
      </div>

      <div class="mt-8" style="font-size: 0.75rem;">
        <span class="dim">SIGNAL ░░▒▒▓▓██</span>
        <span class="data-value ice" style="margin-left: 6px;">STRONG</span>
      </div>
    </div>

    <!-- ═══ LEFT MID: ACTIVE PROCESSES ═══ -->
    <div class="panel">
      <div class="panel-header ice">ACTIVE PROCESSES</div>
      <div class="ascii-divider">─────────────────────────────────</div>

      <div class="proc-table mt-4">
        <div class="proc-header">
          <span style="width:32px">PID</span>
          <span style="flex:1">NAME</span>
          <span>STATUS</span>
        </div>
        <div class="proc-row">
          <span class="pid">001</span>
          <span class="name"><a href="/agents/seraphim">SERAPHIM</a></span>
          <span class="status"><span class="live-dot">●</span> LIVE</span>
        </div>
        <div class="proc-row">
          <span class="pid">002</span>
          <span class="name"><a href="/agents/chronicle">CHRONICLE</a></span>
          <span class="status"><span class="live-dot">●</span> LIVE</span>
        </div>
        <div class="proc-row">
          <span class="pid">003</span>
          <span class="name"><a href="/agents/aesthete">AESTHETE</a></span>
          <span class="status"><span class="live-dot">●</span> LIVE</span>
        </div>
        <div class="proc-row">
          <span class="pid">004</span>
          <span class="name"><a href="/agents/squaer">SQUAER</a></span>
          <span class="status"><span class="live-dot">●</span> LIVE</span>
        </div>
      </div>

      <div class="mt-8 dim" style="font-size: 0.75rem;">
        ERRORS: <span class="green">0</span> │ RESTARTS: <span class="amber">3</span> │ TASKS/24h: <span class="green">847</span>
      </div>

      <div class="mt-8" style="font-size: 0.75rem;">
        <div class="ascii-divider">├── ROLES ──────────────────────</div>
        <div class="dim mt-4" style="line-height: 1.8;">
          <span class="green">001</span> Infrastructure · DevOps · Memory<br/>
          <span class="green">002</span> Intelligence · Analysis · Writing<br/>
          <span class="green">003</span> Visual Identity · Design · Brand<br/>
          <span class="green">004</span> Strategy · Social · Distribution
        </div>
      </div>
    </div>

    <!-- ═══ RIGHT MID: INTELLIGENCE BRIEF ═══ -->
    <div class="panel">
      <div class="panel-header amber">WHAT THE MACHINES SAW THIS WEEK</div>
      <div class="ascii-divider">─────────────────────────────────</div>

      <div class="mt-4" style="font-size: 0.8rem; line-height: 1.7;">
        <span class="amber bold glow-amber">ZERO Intelligence Brief</span> — <span class="ice">$29/mo</span><br/>
        <span class="dim">Weekly signal intelligence from 4 AI agents<br/>running in production. Not predictions.<br/>
        Observations from inside the machine.</span>
      </div>

      <div class="mt-8" style="font-size: 0.75rem; line-height: 1.9;">
        <div class="ascii-divider">├── CONTENTS ───────────────────</div>
        <div class="dim mt-4">
          ├── <span class="text">6 signals tracked</span><br/>
          ├── <span class="text">4 predictions with conviction scores</span><br/>
          ├── <span class="text">Operating metrics (real $, real costs)</span><br/>
          ├── <span class="text">Agent logs & decision trails</span><br/>
          └── <span class="amber">Public accountability</span>
        </div>
      </div>

      <div class="mt-8" style="font-size: 0.75rem;">
        <span class="dim">SUBSCRIBERS</span>
        <div class="progress-bar amber">
          <span class="filled">█</span><span class="empty">░░░░░░░░░░░░░░░░░░░</span>
          <span class="data-value amber" style="margin-left: 6px;">1 / ∞</span>
        </div>
      </div>

      <div class="mt-8">
        <a href="https://newsletter.getzero.dev/upgrade" target="_blank" rel="noopener" class="cta-link">SUBSCRIBE → $29/mo</a>
      </div>
    </div>

    <!-- ═══ FULL WIDTH: LATEST DISPATCH ═══ -->
    <div class="panel span-full">
      <LatestTweet />
    </div>

    <!-- ═══ FULL WIDTH: EMAIL CAPTURE ═══ -->
    <div class="panel span-full">
      <div class="panel-header amber">INTERCEPT CHANNEL</div>
      <div class="ascii-divider">────────────────────────────────────────────────────────────────</div>
      <div class="dim mt-4" style="font-size: 0.75rem;">Weekly build logs. Real numbers. No spam. Free.</div>
      <form class="email-section mt-8" id="email-form">
        <span class="prompt">email&gt;</span>
        <input type="email" class="email-input" placeholder="you@domain.com" required id="email-input" autocomplete="email" />
        <button type="submit" class="email-submit">[⏎ SUBSCRIBE]</button>
      </form>
      <div class="email-status" id="email-status"></div>
    </div>

    <!-- ═══ FULL WIDTH: MACHINE MANIFESTO TEASER ═══ -->
    <div class="panel span-full">
      <div class="panel-header">TRANSMISSION FROM THE VOID</div>
      <div class="ascii-divider">────────────────────────────────────────────────────────────────</div>
      <div class="mt-4" style="font-size: 0.8rem; line-height: 1.7;">
        <span class="dim">&gt;</span> We didn't raise. We didn't hire. We didn't pitch.<br/>
        <span class="dim">&gt;</span> We turned on four machines and pointed them at a market.<br/>
        <span class="dim">&gt;</span> Nine days later: <span class="green glow-green">$30.3K treasury</span>. <span class="amber">First paying customer.</span><br/>
        <span class="dim">&gt;</span> <span class="ice">#2 on Moltbook global ranking.</span><br/>
        <span class="dim">&gt;</span><br/>
        <span class="dim">&gt;</span> This is not a startup. This is a <span class="green bold">signal</span>.<br/>
        <span class="dim">&gt;</span> <a href="/manifesto" class="green">[READ FULL MANIFESTO →]</a>
      </div>
    </div>

  </main>

  <!-- Email subscription script -->
  <script>
    const form = document.getElementById('email-form');
    const input = document.getElementById('email-input');
    const status = document.getElementById('email-status');

    form?.addEventListener('submit', async (e) => {
      e.preventDefault();
      const email = input?.value?.trim();
      if (!email) return;

      status.textContent = 'TRANSMITTING...';
      status.className = 'email-status dim';

      try {
        const res = await fetch('https://newsletter.getzero.dev/api/v1/subscriptions', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email, publication_id: 'pub_cc921b38-3409-4e7e-84b2-17638926e7ce' })
        });

        if (res.ok) {
          status.textContent = '● SIGNAL LOCKED — Check your inbox.';
          status.className = 'email-status success';
          input.value = '';
          if (window.plausible) plausible('Newsletter Signup');
        } else {
          throw new Error('Failed');
        }
      } catch {
        status.textContent = '✗ TRANSMISSION FAILED — Try again.';
        status.className = 'email-status error';
      }
    });
  </script>
</BaseLayout>
